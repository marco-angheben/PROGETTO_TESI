(function(t){function e(e){for(var i,o,l=e[0],r=e[1],c=e[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,l=1;l<a.length;l++){var r=a[l];0!==s[r]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"073a":function(t,e,a){"use strict";var i=a("82ae"),s=a.n(i);s.a},1012:function(t,e,a){"use strict";var i=a("ea6f"),s=a.n(i);s.a},"2a3e":function(t,e,a){"use strict";var i=a("e83c"),s=a.n(i);s.a},"5c0b":function(t,e,a){"use strict";var i=a("9c0c"),s=a.n(i);s.a},"7a58":function(t,e,a){"use strict";var i=a("ba21"),s=a.n(i);s.a},"82ae":function(t,e,a){},"9c0c":function(t,e,a){},ba21:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e6cf"),a("cca6"),a("a79d");var i,s,n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("site-navigation"),a("router-view")],1)},l=[],r=a("9ab4"),c=a("60a3"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"site-navigation"},[a("vs-navbar",{attrs:{fixed:"","center-collapsed":"","padding-scroll":""},scopedSlots:t._u([{key:"left",fn:function(){return[a("router-link",{staticClass:"home",attrs:{to:"/home"},nativeOn:{click:function(e){t.active=t.Page.HOME}}},[t._v("Home")])]},proxy:!0}]),model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("vs-navbar-item",{staticStyle:{display:"none"},attrs:{active:t.active===t.Page.HOME}},[t._v(" Home ")]),a("vs-navbar-item",{attrs:{active:t.active===t.Page.SUBMIT_IMAGE,to:"/submit-image",id:t.Page.SUBMIT_IMAGE}},[t._v(" Submit image ")]),a("vs-navbar-item",{attrs:{active:t.active===t.Page.SUBMIT_VIDEO,to:"/submit-video",id:t.Page.SUBMIT_VIDEO}},[t._v(" Submit video ")])],1)],1)},d=[];a("ddb0");(function(t){t["HOME"]="HOME",t["SUBMIT_VIDEO"]="SUBMIT_VIDEO",t["SUBMIT_IMAGE"]="SUBMIT_IMAGE"})(i||(i={})),function(t){t["FILE_SELECTING"]="FILE_SELECTING",t["FILE_SELECTED"]="FILE_SELECTED",t["FILE_UPLOADING"]="FILE_UPLOADING",t["FILE_UPLOADED"]="FILE_UPLOADED"}(s||(s={}));let p=class extends c["b"]{constructor(){super(...arguments),this.active=i.HOME,this.Page=i}};p=Object(r["a"])([c["a"]],p);var f=p,h=f,v=(a("7a58"),a("2877")),E=Object(v["a"])(h,u,d,!1,null,"74a4cba3",null),b=E.exports;let L=class extends c["b"]{};L=Object(r["a"])([Object(c["a"])({components:{SiteNavigation:b}})],L);var _=L,g=_,m=(a("5c0b"),Object(v["a"])(g,o,l,!1,null,null,null)),I=m.exports,O=a("8c4f"),S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home grid"},[a("div",{staticClass:"site-title"},[t._v("Home")]),a("div",{staticClass:"site-description"},[t._v("Use the above navbar to choose if you want to submit an image or a video. After that, click on the button to properly select a file. You will se a preview of the file. Click again the button to upload the file to the server and wait (it could take a lot) until the server will respound and the analyzed file downloaded.")])])}];let C=class extends c["b"]{};C=Object(r["a"])([c["a"]],C);var y=C,U=y,j=(a("1012"),Object(v["a"])(U,S,F,!1,null,"99a88a02",null)),D=j.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"submit-image"},[a("div",{staticClass:"site-title"},[t._v("Submit image")]),t.state===t.State.FILE_SELECTING?a("div",{staticClass:"site-placeholder placeholder",on:{click:t.selectFile}},[t._v("+")]):a("img",{staticClass:"image",attrs:{src:t.objectUrl}}),a("vs-button",{staticClass:"button",attrs:{size:"large"},on:{click:t.buttonClicked}},[t._v(t._s(t.buttonText))]),a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",accept:"image/jpeg"},on:{change:function(e){return t.fileSelected(e)}}})],1)},T=[],P=(a("2b3d"),a("bc3a")),k=a.n(P);let x=class extends c["b"]{constructor(){super(...arguments),this.State=s,this.state=s.FILE_SELECTING,this.file=null,this.objectUrl=null,this.loadingObject=null}get buttonText(){switch(this.state){case s.FILE_SELECTING:return"Select an image";case s.FILE_SELECTED:return"Upload the image";case s.FILE_UPLOADING:return"Uploading the image";case s.FILE_UPLOADED:return"Image uploaded!!!"}}get loading(){return this.state===s.FILE_UPLOADING}fileSelected(t){const e=t.target;e.files&&e.files[0]&&(this.file=e.files[0],this.objectUrl=""+URL.createObjectURL(this.file),this.state=s.FILE_SELECTED)}downloadBlob(t){const e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.setAttribute("download","image.jpg"),document.body.appendChild(a),a.click()}startLoadingSpinner(){this.loadingObject=this.$vs.loading({type:"circles",scale:"2",background:"#ffffffC1",opacity:1,color:"primary",text:"Uploading"})}stopLoadingSpinner(){this.loadingObject.close()}buttonClicked(){switch(this.state){case s.FILE_SELECTING:this.selectFile();break;case s.FILE_SELECTED:this.uploadFile();break}}selectFile(){const t=this.$refs.file;t.click()}async uploadFile(){if(this.state!==s.FILE_UPLOADING)try{this.state=s.FILE_UPLOADING,this.startLoadingSpinner();const t=new FormData;t.append("image",this.file);const e=(await k.a.post("http://localhost:5000/api/image",t,{responseType:"blob"})).data;this.state=s.FILE_UPLOADED,this.downloadBlob(e)}catch(e){var t;this.state=s.FILE_SELECTED,alert("Errore nel server: "+(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)),console.error(e),console.error(null===e||void 0===e?void 0:e.response)}finally{this.stopLoadingSpinner()}}};x=Object(r["a"])([c["a"]],x);var G=x,A=G,M=(a("073a"),Object(v["a"])(A,w,T,!1,null,"714f42f0",null)),N=M.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"submit-video"},[a("div",{staticClass:"site-title"},[t._v("Submit Video")]),t.state===t.State.FILE_SELECTING?a("div",{staticClass:"site-placeholder placeholder",on:{click:t.selectFile}},[t._v("+")]):a("video",{ref:"video",staticClass:"video",attrs:{controls:""}},[a("source",{attrs:{src:t.objectUrl,type:t.file.type}})]),a("vs-button",{staticClass:"button",attrs:{size:"large"},on:{click:t.buttonClicked}},[t._v(t._s(t.buttonText))]),a("input",{ref:"file",staticClass:"input-file",attrs:{type:"file",accept:"video/mp4"},on:{change:function(e){return t.fileSelected(e)}}})],1)},$=[];let H=class extends c["b"]{constructor(){super(...arguments),this.State=s,this.state=s.FILE_SELECTING,this.file=null,this.objectUrl=null,this.loadingObject=null}get buttonText(){switch(this.state){case s.FILE_SELECTING:return"Select a video";case s.FILE_SELECTED:return"Upload the video";case s.FILE_UPLOADING:return"Uploading the video";case s.FILE_UPLOADED:return"Video uploaded!!!"}}get loading(){return this.state===s.FILE_UPLOADING}fileSelected(t){const e=t.target;e.files&&e.files[0]&&(this.file=e.files[0],this.objectUrl=""+URL.createObjectURL(this.file),this.state=s.FILE_SELECTED)}downloadBlob(t){const e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.setAttribute("download","video.mp4"),document.body.appendChild(a),a.click()}startLoadingSpinner(){this.loadingObject=this.$vs.loading({type:"circles",scale:"2",background:"#ffffffC1",opacity:1,color:"primary",text:"Uploading"})}stopLoadingSpinner(){this.loadingObject.close()}buttonClicked(){switch(this.state){case s.FILE_SELECTING:this.selectFile();break;case s.FILE_SELECTED:this.uploadFile();break}}selectFile(){const t=this.$refs.file;t.click()}async uploadFile(){if(this.state!==s.FILE_UPLOADING)try{this.state=s.FILE_UPLOADING,this.startLoadingSpinner();const t=new FormData;t.append("video",this.file);const e=(await k.a.post("http://localhost:5000/api/video",t,{responseType:"blob"})).data;this.state=s.FILE_UPLOADED,this.downloadBlob(e)}catch(e){var t;this.state=s.FILE_SELECTED,alert("Errore nel server: "+(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)),console.error(e),console.error(null===e||void 0===e?void 0:e.response)}finally{this.stopLoadingSpinner()}}};H=Object(r["a"])([c["a"]],H);var R=H,V=R,z=(a("2a3e"),Object(v["a"])(V,B,$,!1,null,"bf223760",null)),J=z.exports;n["default"].use(O["a"]);const Y=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:D},{path:"/submit-image",name:"submit-image",component:N},{path:"/submit-video",name:"submit-video",component:J}],q=new O["a"]({mode:"history",base:"/",routes:Y});var K=q,Q=a("574d"),W=a.n(Q);a("04f2");n["default"].use(W.a),new n["default"]({router:K,render:t=>t(I)}).$mount("#app")},e83c:function(t,e,a){},ea6f:function(t,e,a){}});
//# sourceMappingURL=app.3ad0ddf6.js.map